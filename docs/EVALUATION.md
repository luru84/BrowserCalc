# EVALUATION（E2E/手動確認チェックリスト）

受け入れ条件に沿ったE2E/手動確認の手順をまとめる。自動化は今後の拡張とし、現時点では手動チェックで担保する。

## 実施前準備
- `make dev` または `npm run dev` で起動し、`http://localhost:5173/` を開く。
- キーボード操作はフォーカスがアプリ内にあることを確認。
- テーマ/設定の永続化は localStorage を利用するため、必要に応じてブラウザストレージをクリアして初期状態を再現。

## シナリオ
- 逐次計算と `=` 連打  
  - `2 + 3 =` → 5、続けて `=` `=` → 8, 11 となる。演算子インジケータが更新される。
- クリア系・バックスペース  
  - `CE` は現在入力のみクリア、`C` で全状態リセット、`⌫` で1文字削除（単一桁なら0に戻る）。
- パーセント  
  - `200 + 10 % =` → 220、`200 × 10 % =` → 20（逐次モデル）。
- 税計算と丸め  
  - デフォルト税率10%で `1000` → `税込` → `1100.0`（第3位四捨五入→第2位表示）。  
  - 税率を 8% に変更後、`税込`/`税抜` が新税率で反映される。
- 精度/表示設定  
  - 精度を 4 桁に変更すると表示が更新される。桁区切りON/OFFがトグルで反映。表示幅超過時に科学表記へ切替設定が効く。
- メモリ操作  
  - `MS` で保存後 `M` インジケータ表示。`M+`/`M-` で加減算、`MR` で呼び出し、`MC` でクリアしてインジケータ非表示。
- 履歴  
  - `=` 実行で {式,結果} が履歴に追加される。再利用で表示にセット、コピーでクリップボードへ入る。履歴クリアボタンで空になる。
- モード切替（逐次 ↔ 式評価）  
  - 式モードで `1 + 2 * 3 =` → 7（演算子優先）。エラー時は式が保持され、`C` で復帰。括弧は現行スコープ外。
- キーボード操作  
  - 数字/演算子 `+ - * /`、Enter/`=` で計算、Backspace で削除、`Esc`/`c` で全クリア、`%` でパーセント。ブラウザ標準ショートカットを阻害しないこと。
- エラー/制約  
  - `1 / 0 =` でエラー表示、`C` で復帰。桁上限（整数12桁）を超える入力は無視またはクリップされる。
- 永続化  
  - テーマ、税率、表示設定、モード選好がリロード後も保持される。履歴はリロードで消える。
- テーマ/レスポンシブ  
  - ライト/ダークを切替えUIが更新。モバイル幅（<768px）で1カラム、デスクトップで2カラム表示が崩れない。
- PWA/オフライン（任意）  
  - `npm run build && npm run preview` で配信し、ブラウザの「オフライン」で主要機能（計算/設定永続）が動作することを確認。インストール可能かも確認する。
